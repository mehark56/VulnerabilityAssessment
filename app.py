from flask import Flask, render_template
import datetime
app = Flask(__name__)

import RPi.GPIO as GPIO
import time

GPIO.setmode(GPIO.BCM)
pinList = [17,27,22,23,24,25,8,7]
for i in pinlist :
    GPIO. setup(i,GPIO. OUT)
    GPIO.output (i, GPIO.HIGH)
DigitalOff = 17
DigitalOn = 27
Light = 22
@app.route("/")
def hello():
    now = datetime.datetime.now()
    timeString = now.strftime("%Y-%m-%d %H:%M")
    templateData = {
        'title':'HELLO!',
        'time': timeString
    }
    return render_template('index.html', **templateData)
@app.route("/<devicename>/<action>")
def action(devicename, action):
    if devicename == "Digital" :
        if action == "On":
            GPIO.output (DigitalOn, GPIO. LOW)
            GPIO.output(DigitalOff, GPIO.HIGH)
        elif action == "Off":
            GPIO.output (DigitalOff, GPIO. LOW)
            GPIO.output(DigitalOn, GPIO.HIGH)
    elif devicename == "Light" :
        if action == "On":
            GPIO.output(Light, GPIO.LOW)
        elif action == "Off":
            GPIO.output(Light, GPIO.HIGH)
    return render_template('index.html')
if __name__ == "__main__":
    app.run(host = '0.0.0.0', port = 8080, debug = True)